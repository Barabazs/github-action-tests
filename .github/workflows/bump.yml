on:
  pull_request:
    types: [labeled, synchronize]


jobs:
  if_merged:
    # if: github.event.pull_request.merged == true
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - name: Check for label and update version
        run: |
          LABEL_NAME=$(jq --raw-output '.label.name' "$GITHUB_EVENT_PATH")
          if [[ "$LABEL_NAME" == "major" || "$LABEL_NAME" == "minor" || "$LABEL_NAME" == "patch" ]]; then
            echo "$LABEL_NAME" > label.txt
            git config user.name github-actions
            git config user.email github-actions@github.com
            git add .
            git commit -m "generated"
            git push
          fi


